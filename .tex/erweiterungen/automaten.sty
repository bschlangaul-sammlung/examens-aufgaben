\NeedsTeXFormat{LaTeX2e}[1995/12/01]
\ProvidesPackage{lehramt-informatik-automaten}[2021/02/14 Zum Setzen von Automaten]

\RequirePackage{tikz}
\usetikzlibrary{arrows,automata,positioning}

\directlua{
  automaten = require('lehramt-informatik-automaten')
}

% \let\k=\liAutomatenKante
\def\liAutomatenKante#1#2#3#4{
  \path (#1) edge[#4] node{#3} (#2);
}

\ExplSyntaxOn
% \let\u=\liKellerUebergang
% RegulÃ¤rer Ausdruck zum Konvertieren:
% \((.*), (.*), (.*)\)
% \\u{$1 $2 $3}
\def\liKellerUebergang#1{
  \directlua{automaten.gib_uebergaenge_aus('#1')}
}
\ExplSyntaxOff

\tikzset{
  li keller knoten/.style={
    text width=2cm,
    align=center,
    font=\footnotesize,
  },
  li automat/.style={
    ->,
    node distance=2cm
  },
  li kellerautomat/.style={
    li automat,
    every edge/.append style={
      every node/.style={
        li keller knoten
      }
    }
  }
}
