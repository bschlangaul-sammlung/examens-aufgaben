\NeedsTeXFormat{LaTeX2e}[1995/12/01]
\ProvidesPackage{lehramt-informatik-syntax}[2020/06/10 Ein Hüll-Paket um
`minted`, das sich um die Syntax-Hervorhebung des Java-Codes kümmert.]
\RequirePackage{xparse}

\ExplSyntaxOn

\RequirePackage{minted}
% pygmentize -L styles
\usemintedstyle{colorful}
%\BeforeBeginEnvironment{minted}{\begin{mdframed}}
%\AfterEndEnvironment{minted}{\end{mdframed}}
%\setminted{breaklines=true,linenos}
\setminted{
  breaklines=true,
  linenos,
  fontsize=\footnotesize,
}

\def\liJavaCode#1{\mintinline{java}|#1|}

\def\liLatexCode#1{\mintinline{latex}|#1|}

\tl_const:Nx \l_pfad_tl {\LehramtInformatikRepository/Code/src}
\tl_const:Nn \l_main_tl {main/java/org/bschlangaul}
\tl_const:Nn \l_test_tl {test/java/org/bschlangaul}

\NewDocumentCommand{\liJavaDatei}{ O{} m }{
  \inputminted[#1]{java}{\l_pfad_tl/main/java/org/bschlangaul/#2.java}
}

\NewDocumentCommand{\liJavaTestDatei}{ O{} m }{
  \inputminted[#1]{java}{\l_pfad_tl/test/java/org/bschlangaul/#2.java}
}

% \liJavaExamen{66116}{2015}{03}{Kunde}
% \\liJavaDatei(\[.*\])?\{.*examen_(\d{5})_(\d{4})_(\d{2})/(.*)\}
% \\liJavaExamen$1{$2}{$3}{$4}{$5}
\NewDocumentCommand{\liJavaExamen}{ O{firstline=3} m m m m }{
  \tl_set:Nn \l_jahreszeit_tl {#4}
  \str_case:nn {#4} {
    {03} {
      \tl_set:Nn \l_jahreszeit_tl {fruehjahr}
    }
    {09} {
      \tl_set:Nn \l_jahreszeit_tl {herbst}
    }
  }
  \inputminted[#1]{java}{\l_pfad_tl/\l_main_tl/examen/examen_#2/jahr_#3/\l_jahreszeit_tl/#5.java}
}

\ExplSyntaxOff
