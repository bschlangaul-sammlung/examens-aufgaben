\NeedsTeXFormat{LaTeX2e}[1995/12/01]
\ProvidesPackage{lehramt-informatik-makros}[2020/11/27 Eine Sammlung von
häufig verwendeten Makros und Umgebungen, die thematisch zu keinem
anderen Paket passen]

%-----------------------------------------------------------------------
% diverse
%-----------------------------------------------------------------------

\RequirePackage{hyperref}
\RequirePackage{graphicx}

%-----------------------------------------------------------------------
% Macros
%-----------------------------------------------------------------------

%%
% \inhaltsverzeichnis
%%
\def\inhaltsverzeichnis {
  \begin{mdframed}
    \begingroup
    \let\clearpage\relax
    \tableofcontents
    \endgroup
  \end{mdframed}
}

%%
% \mephm (\marginpar and \emph)
%%
\newcommand{\memph}[1]{\emph{#1}\marginpar{\tiny#1}}

%%
% \SLASH
%%
\newcommand\SLASH{\char`\\}

%%
% \liPseudoUeberschrift
%%
\newcommand{\liPseudoUeberschrift}[1]{
\bigskip
\noindent
\textsf{\textbf{#1}}
\noindent
}

%%
% \liBeschriftung
%%
\newcommand{\liBeschriftung}[1]{
\par
\noindent
\medskip
\textbf{#1}:
\medskip
\noindent
}

\def\hinweis#1{{\footnotesize[#1]}}

%-----------------------------------------------------------------------
% Environments
%-----------------------------------------------------------------------

\NewDocumentEnvironment { liProjektSprache }{ o +b } {} {}
\NewDocumentEnvironment { liEinbettung }{ o +b } {#2} {}

%%
% \begin{liAntwort}
%%
\RequirePackage{xparse}
\ExplSyntaxOn
\NewDocumentEnvironment{ liAntwort } { O{standard} }
{
  \str_case:nn {#1} {
    {standard} {
      \def\beschriftung{}
      \mdfsetup{backgroundcolor=gray!5,linecolor=gray}
    }
    {richtig} {
      \def\beschriftung{richtig}
      \mdfsetup{backgroundcolor=green!5,linecolor=green}
    }
    {falsch} {
      \def\beschriftung{falsch}
      \mdfsetup{backgroundcolor=red!3,linecolor=red}
    }
    {muster} {
      \def\beschriftung{Musterlösung}
      \mdfsetup{backgroundcolor=green!12,linecolor=green}
    }
  }
  \ifx\beschriftung\empty\else
  \noindent
  \textbf{\beschriftung{}:}
  \fi
  \begin{mdframed}
}
{\end{mdframed}}

\NewDocumentEnvironment{ liAdditum } { o }
{
  \begin{mdframed}[backgroundcolor=yellow!5]
  \IfNoValueTF {#1}
  { \liPseudoUeberschrift{Additum} }
  { \liPseudoUeberschrift{Additum:~#1} }
}
{\end{mdframed}}

%%
% \begin{exkurs}
%%
\NewDocumentEnvironment{exkurs}{o +b}{
  \vspace{0.2cm}%
  \begin{mdframed}[
    backgroundcolor=white,
    bottomline=false,
    innermargin=1cm,
    leftline=true,
    linecolor=black,
    linewidth=0.1cm,
    outermargin=1cm,
    rightline=false,
    topline=false,
  ]
  \footnotesize
  \noindent%
  \textbf{Exkurs:~#1}\par%
  \noindent%
  #2
  \end{mdframed}
  \vspace{0.2cm}
}{}

%%
% \begin{quellen}
%%
\cs_new:Npn \listenpunkt #1 {\item #1}
\NewDocumentEnvironment { quellen }{ +b }
{
  \seq_clear_new:N \l_quellen
  \seq_set_split:Nnn \l_quellen {\item} {#1}
  \seq_remove_all:Nn \l_quellen {}
  \begin{mdframed}[backgroundcolor=yellow!30,linecolor=yellow]
  \footnotesize
  \noindent
  \textbf{Überblick~über~die~Quellen:}
  \begin{compactitem}
  \seq_map_function:NN \l_quellen {\listenpunkt}
  \end{compactitem}
  \end{mdframed}
  % https://tex.stackexchange.com/a/229004
  \makeatletter
  \par\@afterindentfalse\@afterheading
  \makeatother
} {}

%%
% \begin{lernkartei}
%%
\NewDocumentEnvironment { lernkartei }{ m +b }
{
  \begin{mdframed}
  \footnotesize
  \noindent%
  \textbf{Lernkarteikarte:~#1}\par%
  \noindent%
  #2
  \end{mdframed}
} {}

\NewDocumentEnvironment { liDiagramm }{ m +b }
{
  \begin{mdframed}[backgroundcolor=white!0]
  \small
  \noindent%
  \textit{#1}:
  \begin{center}
  #2
  \medskip
  \end{center}
  \end{mdframed}
} {}

\ExplSyntaxOff

\def\ExamensAufgabeTTA #1 / #2 / #3 : Thema #4 Teilaufgabe #5 Aufgabe #6 {
  \input{\LehramtInformatikRepository/Staatsexamen/#1/#2/#3/Thema-#4/Teilaufgabe-#5/Aufgabe-#6.tex}
}

\def\ExamensAufgabeTA #1 / #2 / #3 : Thema #4 Aufgabe #5 {
  \input{\LehramtInformatikRepository/Staatsexamen/#1/#2/#3/Thema-#4/Aufgabe-#5.tex}
}

\def\ExamensAufgabeA #1 / #2 / #3 : Aufgabe #4 {
  \input{\LehramtInformatikRepository/Staatsexamen/#1/#2/#3/Aufgabe-#4.tex}
}

\def\liFussnoteUrl#1{\footnote{\url{#1}}}
\def\liFussnoteLink#1#2{\footnote{\href{#2}{#1}}}
