\documentclass{lehramt-informatik}
\usepackage{amsmath}
\usepackage[normalem]{ulem}

\begin{document}

\chapter{Aufgabenblatt 4: Wiederholung: Relationale Algebra, SQL, ER-Modell, Relationenschema}

%-----------------------------------------------------------------------
%
%-----------------------------------------------------------------------

\section{Aufgabe 1: Division}

Gegeben sind zwei Relationen, repräsentiert als Tabellen. Bestimmen Sie
die Ergebnisrelation $R1 \div R2$!

\begin{antwort}
\begin{tabular}{ll}
\textbf{a} & \textbf{c} \\
a & 4 \\
b & d
\end{tabular}
\end{antwort}

%-----------------------------------------------------------------------
%
%-----------------------------------------------------------------------

\section{Aufgabe 2: Uni-ER-Modell (Staatsexamen Frühjahr 1996 -
Aufgabe 2)}

Gegeben ist das folgende (sehr ausführliche) ER-Modell.

\renewcommand{\labelenumi}{(\alph{enumi})}
\begin{enumerate}
\item Erarbeiten Sie zu diesem ER-Modell das (verfeinerte) relationale
DB-Schema! Geben Sie geeignete Domänen an.

\begin{antwort}[falsch]
\texttt{ist\_zugeordnet} muss auch aufgelöst
werden. Falsche Notation von Fremdschlüsseln: eckige Klammern
verwerden[].

\ttfamily
\footnotesize
Durchführung(\underline{Zeit:DATE, RaumNr:INT}, \dashuline{Nr:INT})\\

Lehrveranstaltung(\underline{Nr:INT}, Name:VARCHAR(20), SWS:INT,
Semester:INT, Art:VARCHAR(20), \dashuline{PersNr:INT})\\

Dozent(\underline{PersNr:INT}, Name:VARCHR(20),
\dashuline{FakName:VARCHAR(40)})\\

Fakultät(\underline{Name:VARCHAR(40)})\\

Student(\underline{MatrNr:INT}, Name:VARCHAR(40), Geburtsdatum:DATE,
Semesteranzahl:INT)\\

Adresse(\underline{Adresse:VARCHAR(100)})\\

belegt(\dashuline{Nr:INT, MatrNr:INT})\\

besitzt(\dashuline{Adresse:VARCHAR(100), MatrNr:INT})\\

ist\_zugeordnet(Studiengang:VARCHAR(40), \dashuline{MatrNr:INT,
FakName:VARCHAR(40)})\\
\end{antwort}

\begin{antwort}[muster]
\ttfamily
\footnotesize
Dozent(\underline{PersNr:INT}, Name:VARCHAR(20),
\dashuline{FakName:VARCHAR(40)[Fakultät]})\\

Fakultät(\underline{Name:VARCHAR(40)})\\

Lehrveranstaltung(\underline{Nr:INT}, Name:VARCHAR(20), SWS:INT,
Semester:INT, Art:VARCHAR(20), \dashuline{PersNr:INT[Dozemtn]})\\

Student(\underline{MatrNr:INT}, Name:VARCHAR(40), Geburtsdatum:DATE,
Semesteranzahl:INT, \dashuline{FakName:VARCHAR(40)[Fakultät]},
Studiengang:VARCHAR(40))\\

Adresse(\underline{Adresse:VARCHAR(100)})\\

belegt(\dashuline{Nr:INT[Lehrveranstaltung], MatrNr:INT[Adresse]})\\

besitzt(\dashuline{Adresse:VARCHAR(100)[Adresse], MatrNr:INT[Student]})\\

Durchführung(\underline{Zeit:DATE, RaumNr:INT}, \dashuline{Nr:INT[Student]})\\
\end{antwort}

\item Welche Fremdschlüssel gibt es in diesem Schema?
\end{enumerate}

\noindent
Es soll nun mit SQL eine entsprechende relationale Datenbank angelegt
werden. Geben Sie für folgende Aufgaben die jeweiligen SQL-Befehle an.

\begin{enumerate}
\setcounter{enumi}{2}

\item Die Tabellenschemata von \texttt{Student} und \texttt{besitzt}
sollen erzeugt werden.

\begin{antwort}[muster]
\begin{minted}{sql}
CREATE TABLE Fakultaet (
  Name VARCHAR(20) PRIMARY KEY
);

CREATE TABLE Adresse (
  Adresse VARCHAR(30) PRIMARY KEY
);

CREATE TABLE Student (
  MatrNr INTEGER PRIMARY KEY,
  Name VARCHAR(20) NOT NULL,
  Geburtsdatum DATE,
  Semesteranzahl INTEGER,
  Fakultaetsname VARCHAR(20),
  Studiengang VARCHAR(20),
  FOREIGN KEY (Fakultaetsname) REFERENCES Fakultaet(Name)
);

CREATE TABLE besitzt (
  Adresse VARCHAR(30) NOT NULL,
  MatrNr INTEGER NOT NULL,
  PRIMARY KEY (Adresse, MatrNr),
  FOREIGN KEY (Adresse) REFERENCES Adresse(Adresse),
  FOREIGN KEY (MatrNr) REFERENCES Student(MatrNr)
);
\end{minted}
\end{antwort}

\item Am Tabellenschema von \texttt{Student} werden zwei Änderungen
vorgenommen:

\begin{itemize}
\item Es soll ein weiteres Attribut Vorname hinzugefügt werden.

\begin{antwort}[muster]
\begin{minted}{sql}
ALTER TABLE Student ADD COLUMN Vorname VARCHAR(20);
\end{minted}
\end{antwort}

\item Als Integritätsbedingung wird festgelegt, dass die Semesterzahl
kleiner als 15 sein muss.
\end{itemize}

\begin{antwort}[muster]
\begin{minted}{sql}
ALTER TABLE Student ADD CHECK (Semesteranzahl < 15);
\end{minted}

oder

\begin{minted}{sql}
ALTER TABLE Student ADD CONSTRAINT begrenzung_Semester CHECK (Semesteranzahl < 15);
\end{minted}
\end{antwort}

\end{enumerate}

%-----------------------------------------------------------------------
%
%-----------------------------------------------------------------------

\section{Aufgabe 3: Olympische Spiele – Zur Wiederholung}

Geben Sie ein Entity-Relationship-Diagramm (mit Schlüssel und
Funktionalität) für folgendes Problem an:

Eine europäische Fachzeitschrift für Leichtathletik möchte in einer
relationalen Datenbank die folgenden Informationen zu den Olympischen
Sommerspielen speichern: Für jeden Sportler, der bei den Olympischen
Spielen teilgenommen hat, sollen der Name, die Nationalität, die Größe
und das Gewicht bekannt sein. Zusätzlich soll abgefragt werden können,
ob der betreffenden Sportler aus Europa stammt. Zu den Olympischen
Spielen sollen das Jahr der Austragungsort und die Teilnehmerzahl
gespeichert werden. Außerdem soll bekannt sein, welcher Sportler bei
welchen Spielen welchen Rekord erzielt hat. Zu jedem Rekord sollen die
Disziplin und die Art des Rekords (Weltrekord, Europarekord,...)
gespeichert werden. Darüber soll ohne Umweg abrufbar sein, ob es sich um
einen Rekord in der Leichtathletik handelt. Es sei vorausgesetzt, dass
jeder Sportler eindeutig durch seinen Namen identifizierbar ist und dass
Olympische Spiele in verschiedenen Jahren in derselben Stadt stattfinden
können. Ein Rekord soll eindeutig durch die Disziplin und die Art des
Rekords gekennzeichnet sein.

\begin{antwort}[falsch]
gemacht am 12.12 auf Schmierpapier. Route erzielt vergessen. Entity-Typen
können nicht direkt verbunden werden.
\end{antwort}

%-----------------------------------------------------------------------
%
%-----------------------------------------------------------------------

\include{Aufgabe-4}

%-----------------------------------------------------------------------
%
%-----------------------------------------------------------------------

\include{Aufgabe-5}

\end{document}
