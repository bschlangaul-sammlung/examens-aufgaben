\documentclass{lehramt-informatik-aufgabe}
\liLadePakete{uml}
\begin{document}
\liAufgabenTitel{Fahrkartenautomat}
\section{Aufgabe 3
\index{Anwendungsfalldiagramm}
\footcite{examen:66116:2020:09}}

Im Folgenden ist eine Systembeschreibung für einen „Fahrkartenautomat“
angegeben.

Es gibt zwei Arten von Bahnfahrern: Gelegenheitsfahrer und Vielfahrer.
Bei der Benutzung des Kartenautomaten kann sich grundsätzlich jeder die
Hilfe anzeigen lassen und ein Beschwerdeformular ausfüllen.

Gelegenheitsfahrer haben keine Benutzer-Id und können Einzelfahrkarten
auswählen und anschließend kaufen. Damit ein Kaufvorgang erfolgreich
abgeschlossen wird, muss ein entsprechender Geldbetrag eingezahlt
werden. Dies geschieht entweder mit Bargeld oder per EC-Karte. Nach dem
Kauf eines Tickets kann man sich dafür optional eine separate Quittung
drucken lassen.

Vielfahrer haben eine eindeutige Benutzer-Id mit Passwort, um sich am
Automaten zu authentifizieren. Ein Vielfahrer kann sowohl eine
Einzelfahrkarte als auch eine personalisierte Monatskarte erwerben.
Sofern er eine Monatskarte besitzt (Information im System hinterlegt),
kann er sich kostenfrei eine Ersatzfahrkarte ausstellen lassen, falls er
seine Monatskarte verloren hat. Wenn die Authentifizierung oder ein
Kaufvorgang fehlschlägt, soll eine entsprechende Fehlermeldung
erscheinen.

\begin{enumerate}

%%
% a)
%%

\item Geben Sie die im Text erwähnten Akteure für das beschriebene
System an.

\begin{liAntwort}
Bahnfahrer

\begin{itemize}
\item Gelegenheitsfahrer

\item Vielfahrer
\end{itemize}
\end{liAntwort}

%%
% b)
%%

\item Identifizieren Sie zwei weitere Stakeholder und nennen Sie dazu je
zwei unterschiedliche Anwendungsfälle des Systems, in die diese
involviert sind.

\begin{liAntwort}
EC-Karte
Bargeld
\end{liAntwort}

%%
% c)
%%

\item Geben Sie mindestens sechs verschiedene Anwendungsfälle für das
beschriebene System an.

\begin{liAntwort}
\begin{itemize}
\item Hilfe anzeigen
\item Beschwerdeformular ausfüllen
\item Auswahl
\begin{itemize}
\item Einzelfahrkarten
\item Monatskarte
\end{itemize}
\item Einzelfahrkarten kaufen
\item Zahlen
\begin{itemize}
\item Bargeld
\item EC-Karte
\end{itemize}
\item Quittung drucken
\item Authentifizieren

\begin{itemize}
\item Bargeld
\item EC-Karte
\end{itemize}
\end{itemize}
\end{liAntwort}

%%
% d)
%%

\item Erstellen Sie aus Ihren vorherigen Antworten ein Use-Case-Diagramm
für das beschriebene System, in dem die Akteure und Anwendungsfälle
inkl. möglicher Generalisierungen und Beziehungen eingetragen sind.
Achten Sie insbesondere auf mögliche <<include>>- und
<<extends>>-Beziehungen und Bedingungen für Anwendungsfälle.

\begin{liAntwort}
\begin{tikzpicture}[scale=0.5,transform shape]
\begin{umlsystem}{Fahrkartenautomat}
\umlusecase[y=0,x=0]{Karte kaufen}
\umlusecase[y=-2,x=0]{Karte bezahlen}
\umlusecase[y=-4,x=0]{Karte auswählen}
\umlusecase[y=2,x=0]{Quittung drucken}
\umlusecase[y=-3,x=-3,width=1.5cm]{Monatskarte auswählen}
\umlusecase[y=-5,x=-3,width=1.5cm]{Einzelkarte auswählen}
\end{umlsystem}

\umlactor[x=-6,y=-2]{Bahnfahrer}
\umlactor[x=-4,y=0]{Vielfahrer}
\umlactor[x=-4,y=-4]{Gelegenheitsfahrer}
\umlactor[x=4,y=-2]{Bargeld}
\umlactor[x=4,y=-4]{EC-Karte}
\umlinclude{usecase-1}{usecase-2}
\umlinclude{usecase-2}{usecase-3}
\umlextend{usecase-4}{usecase-1}

\umlinherit{Vielfahrer}{Bahnfahrer}
\umlinherit{Gelegenheitsfahrer}{Bahnfahrer}

\umlassoc{Bargeld}{usecase-2}
\umlassoc{EC-Karte}{usecase-2}

% \umlassoc{user}{usecase-3}
\end{tikzpicture}
\end{liAntwort}

\end{enumerate}
\end{document}
